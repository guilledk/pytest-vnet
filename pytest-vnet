#!/usr/bin/env python3

import sys
import time
import docker
import pathlib

from docker.types import Mount

client = docker.from_env()

cont = client.containers.create(
	"pytest-vnet:netvm",
	privileged=True,
	mounts=[
		Mount(
			"/root/.pyenv",
			str(pathlib.Path.home() / ".pyenv"),
			"bind",
			read_only=True
			)
		]
	)

cont.start()

_, out = cont.exec_run(
	["pyenv", "versions"],
	workdir="/root"
	)

print(out.decode("utf-8"), end="", flush=True)

cont.stop()
cont.remove()